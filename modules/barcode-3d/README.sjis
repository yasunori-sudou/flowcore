QRcode Perl/CGI & PHP scripts ver. 0.50j
                                               (c)2000-2013, Y.Swetake

�P�A���̃v���O�����łł��邱�ƁB
�@�@���̃v���O������perl���邢��PHP��p���ău���E�U���QRcode��
�@�\�����邽�߂̂��̂ł��B
�@�@perl��(qr_img.cgi)�̓R�}���h���C������ł����삵�܂��B
�@�@���̃o�[�W�����ł� QRcode model2 �� version 1�`40 �ɑΉ�����
�@���܂��B�������ȉ��̋@�\�E���[�h�͎g�p�ł��܂���B

�@�@(1)�A�����E�p�����E�W�r�b�g���[�h�ȊO�̃��[�h
�@�@(2)�A�R�[�h�����ł̃��[�h�̕ύX
�@�@�@�ȂǂȂ�

�@�@���o�[�W����0.40���A���Ɏ����I�ɑΉ����Ă��܂��B

�@�@�������Ɋ�����URL�G���R�[�h�f�[�^��n���Ă��ƕϊ������͈����ł���
�@�@�@�W�r�b�g���[�h�ŃG���R�[�h���邱�Ƃ͂ł��܂��������������ƔF������
�@�@�@���̓f�R�[�h���̊��ɂ��܂��B

�Q�A���e

 (�f�B���N�g���\��)

  qr_img0.50-+-perl--+- qr_img.cgi
             |       +- qr_image.pl
             |       +- qr_html.pl
             |
             +-data -+- qrvV_N.dat
             |       +- rscX.dat
             |       +- qrvfrV.dat
             |
             +-image-+- qrvV.png
             |       +- b.png d.png
             |       
             +-php  -- qr_img.php


�@qr_img.cgi     �p�q�R�[�h�\��perl CGI�i�P��image���o�́B������GD���K�v�B
�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�@�܂��͕����̉摜��g�ݍ��킹��html�ŕ\���j
�@qr_image.pl�@�@perl�ł�png,jpeg�C���[�W�o�̓R�[�h
�@qr_html.pl     perl�ł�html�o�̓R�[�h

�@qrvV_N.dat �@�@�o�[�W����V,�G���[�������x��N�p�f�[�^
�@rscX.dat�@�@�@�G���[�����ꐶ�������ɗp���鉉�Z�e�[�u��
�@qrvfrV.dat �@�@�o�[�W����V�p�Œ�̈�f�[�^(html���[�h�p)

�@qrvV.png �@�@�@�o�[�W����V�p�Œ�C���[�W(png,jpeg�o�͗p)
�@b.png          qr_img.cgi��html���[�h�ŗp����png�t�@�C��
�@d.png          ����

�@qr_img.php     �p�q�R�[�h�\��PHP�i�P��image���o�́B������GD���K�v�B�j

  README.txt  ���̃t�@�C��
  README.sjis ���̃t�@�C����ShiftJIS��
  README-e.txt �p��Ńh�L�������g

�@���������������邽�ߊe�퉉�Z���ʂ�dat�t�@�C���ɂ܂Ƃ߂Ă��܂��B
�@���̂��ߍ��v�̃t�@�C���T�C�Y�����ɑ傫���Ȃ��Ă���܂��B
�@���炩���ߎg���o�[�W�����������Ă���ꍇ�͎g�p���Ȃ�dat�t�@�C����
�@�폜���Ă���肠��܂���B
�@�Ȃ�rscX.dat�ɂ��Ă�JIS X 0510�̕\�P�T�`�Q�PRS�u���b�N�̍��ڂ�
�@(c,k,r)�Ƃ��钆��c��k�̍�������ɊY�����܂��B
�@�Ⴆ�΃o�[�W����1-M��(26,16,4)�Ƃ���̂�26-16=10��rsc10.dat���g�p
�@���܂��B

�R�A�K�v�Ȃ���
�@���s�ɕK�v�Ȃ���
�@perl��
�@�@�EWWW�T�[�o�[�@(perl CGI�����삷����́B)
�@�@�Eperl5

�@�@�ȉ��̂��̂�qr_img.cgi��PNG/JPEG�o�͂ɕK�v�ł��B
�@�@�EGD
�@�@�@�@http://www.boutell.com/gd/
�@�@�EGD.pm
�@�@�@�@http://stein.cshl.org/WWW/software/GD/GD.html
�@�@�Elibpng
    �Ejpeg-6b

�@�@�@�v���O�������� png �� gif �ɕύX����ƌÂ�gd(1.5�ȑO)�Ƃ���p��GD.pm�ł�
�@�@���삵�܂��������֘A�̖�肪���ދ��ꂪ����܂��̎g�p�Ҏ��g�̐ӔC�ł��g������
�@�@�����B

�@PHP��
�@�@�EWWW�T�[�o�[
�@�@�EPHP4.1�ȍ~
�@�@�EGD
�@�@�Elibpng

�@���FGD 2.0�ɂ���
�@�@�@perl��,PHP�łƂ�GD2.0.10���������PHP4.3.0�o���h����
�@�@�@GD�ł�GD�̃o�O�ɂ�萳��ɓ��삵�܂���B
�@�@�@GD2.0.10�ȏ�����g�p���������B

�@����m�F��
�@�@perl�ŁEPHP�łƂ�
     Linux 2.4.18
�@�@ apache-1.3.27 + PHP-4.3.0(as apache module)
�@�@ perl 5.6.1
�@�@ GD 2.0.11
�@�@ GD.pm 2.06

�@���邽�߂ɕK�v�Ȃ���
�@�@�EWWW�u���E�U

�S�A�g�p���@
�S�D�P�A�ݒ�
�S�D�P�D�P�Aperl��
�@�@�@�@�@�P�s�ڂ�
    �@�@�@#!/usr/bin/perl
�@�@�@�@�@�����̃T�[�o�[��perl�ւ̃p�X���w�肵�܂��B

�@�@�@�@�@���ɉ��L��ݒ肵�܂�

# -------- setting area --------
#

 $path="./../data";                # ---You must set path to data files.

���@�f�[�^�t�@�C���Q("qrv*.dat","rsc*.dat")�ւ̃p�X���w�肵�܂��B
���@�f�t�H���g�͓��K�w�ɂ��� data �f�B���N�g���ł��B

 # ---- for PNG or JPEG image
 $image_path="./../image";          # ---You must set path to QRcode frame images.

���@�Œ�̈�C���[�W�Q(qrv*.png)�ւ̃p�X���w�肵�܂��B
���@�f�t�H���g�͓��K�w�ɂ��� image �f�B���N�g���ł��B

 # ---- for HTML mode
 $img_path4html="";           # ---You must set path to b.png and d.png.
                              # Default setting is document root.

���@�@HTML���[�h�̐ݒ���s���܂��B
���@�@�������Ă���b.png d.png��u�����ꏊ�ւ̃p�X�܂���URL���w�肵�܂��B
���@�@�����̓h�L�������g���[�g����̃p�X���邢��URL�ɂȂ�܂��B
���@�@���Ƃ��΃h�L�������g���[�g����img�f�B���N�g���ɂ������Ȃ��
��
���@�@�@$img_path4html="/img";
��
���@�@�@�ƂȂ�܂��B

 @img_fn=("b.png","d.png");    # In html mode,image size depends these files.

��
���@�@�摜�t�@�C���̖��O��ύX�������ꍇ��"b.png","d.png"�̕�����ύX���܂��B
���@�@html���[�h�ł̓C���[�W�̃T�C�Y�͂��̃t�@�C���̉摜�̑傫���Ɉˑ����܂��B
��

 $always_html_mode=0;

��
���@�@1��ݒ肷��Ə��html���[�h�ŏo�͂��܂��B
��

 $version_ul=40;

��
��    �o�[�W�����̏�����w��ł��܂��B�l�͂P����S�O�̐����ł��B
��

#
# ------- setting area end --------


�S�D�P�D�Q�APHP��

���L��ݒ肵�܂��B
/* ------ setting area ------ */

$path="./../data";           /* You must set the path to data files. */

���@�f�[�^�t�@�C���Q("qrv*.dat","rsc*.dat")�ւ̃p�X���w�肵�܂��B
���@�f�t�H���g�͓��K�w�ɂ��� data �f�B���N�g���ł��B

$image_path="./../image";     /* You must set path to QRcode frame images. */

���@�Œ�̈�C���[�W�Q(qrvN.png)�ւ̃p�X���w�肵�܂��B
���@�f�t�H���g�͓��K�w�ɂ��� image �f�B���N�g���ł��B

$version_ul=40;              /* upper limit for version */

���o�[�W�����̏�����w��ł��܂��B�l��1����40�̐����ł��B

/* ------ setting area end ------ */


�S�D�Q�A����
�S�D�Q�D�P�A�u���E�U����̌Ăяo��

�@�@�@qr_img.cgi?d=data[&e=(L,M,Q,H)][&s=int size][&v=(1-40)][&t=(J,H)]
�@�@�@           [&m=(1-16)&n=(2-16)[&o=original data][&p=(0-255)]]

�@�@�@qr_img.php?d=data[&e=(L,M,Q,H)][&s=int size][&v=(1-40)][&t=J]
�@�@�@           [&m=(1-16)&n=(2-16)[&o=original data][&p=(0-255)]]

�@�@�@d:QR�R�[�h������f�[�^�ł��B���ꕶ����8bit������URLencode����Ă���
�@�@�@�@�K�v������܂��B(������'%'��%+16�i�\�L�A�󔒂�'+'��)
�@�@�@�@�e�ʂ𒴂���ƃG���[�\���ƂȂ�܂��B
�@�@�@�@���̃p�����[�^�͏ȗ��ł��܂���B

�@�@�@e:�G���[�������x��
�@�@�@�@�G���[�������x�����w�肵�܂��B
�@�@�@�@�w��ł���̂�L,M,Q,H�̂S��ނŏȗ������ꍇ M ���I������܂��B

�@�@�@s:���W���[���T�C�Y
�@�@�@�@���W���[���T�C�Y���w�肵�܂��B
�@�@�@�@�w��ł���̂�1�ȏ�̐����ł��̒l�ŃC���[�W�̃T�C�Y�����肳��܂��B
�@�@�@�@�ȗ������ꍇ 4(png) �܂��� 8(jpeg) ���I������܂��B
�@�@�@�@html���[�h�ł͈Ӗ��������܂���B

�@�@�@v:�o�[�W����
�@�@�@�@�o�[�W�������w�肵�܂��B
�@�@�@�@���̃v���O�����Ŏw��ł���o�[�W������1�`40�ł��B
�@�@�@�@�ȗ������ꍇ�̓v���O�����������I�����܂��B

�@�@�@t:�摜�^�C�v
�@�@�@�@�摜�^�C�v���w�肵�܂��B
�@�@�@�@�ȗ������ꍇ�≺�L�����ȊO��PNG���o�͂��܂��B
�@�@�@�@J���w�肷���jpeg�ŏo�͂��܂��B
�@�@�@�@H���w�肷���html���[�h�ŏo�͂��܂��B
�@�@�@�@�Ȃ�jpeg�ł̏o�͂�GD��jpeg�Ή����Ă���K�v������܂��B


�@�@���ȉ��͘A�����[�h�p�̃p�����[�^�ł��B���ݎ����I�ɑΉ����Ă��܂��B

�@�@�@m:�A���̉��ڂ̃C���[�W��

�@�@�@n:�S���ŉ��̃C���[�W�����邩

�@�@�@o:���̃f�[�^(URL�G���R�[�h����Ă���K�v������܂��B)

�@�@�@p:���f�[�^����Z�o�����p���e�B�l�i�e�����̃A�X�L�[�l��r���_���a�������́j

�@�@�@�A�����w�肷��Ƃ���m��n�͕K�{�ł��B
�@�@�@�܂�o�܂���p�̂����ꂩ��K���w�肷��K�v������܂��B

�@�@�@��Fabcdefgabcdefg0���Q�ɕ�������Ƃ�

�@�@�@�P�߂̃C���[�W
          qr_img.cgi?d=abcdefg&n=2&m=1&o=abcdefgabcdefg0
�@�@�@�Q�߂̃C���[�W
          qr_img.cgi?d=abcdefg0&n=2&m=2&o=abcdefgabcdefg0

�@�@�@�@�܂��͂��炩���߃p���e�B�l���v�Z���Ă�����

�@�@�@�P�߂̃C���[�W
�@�@�@�@�@qr_img.cgi?d=abcdefg&n=2&m=1&p=48
�@�@�@�Q�߂̃C���[�W
          qr_img.cgi?d=abcdefg0&n=2&m=2&p=48


�S�D�Q�D�Q�A�R�}���h���C�����[�h
�@�@qr_img.cgi�̓R�}���h���C����������s�ł��܂��B
�@�@�����Ԃ͋󔒂ŋ�؂�܂��B
�@�@����d�Ńf�[�^��n���ꍇ��CGI���l�f�[�^��URL�G���R�[�h����Ă���K�v������܂��B
�@�@��P
�@�@ $ ./qr_img.cgi d=This+is+a+pen e=L s=3 > qrcode.png

�@�@�W�����͂���f�[�^��n���ꍇ�͐��f�[�^�̂܂܂łn�j�ł��B
�@�@��Q
�@�@ $ ./qr_img.cgi e=H < data.txt > qrcode.png


�T�A���ӎ���
�@�@���L���m�̏ゲ�g�p���������B
�@�@�i�P�j���̃v���O�����̃}�X�N���胋�[�`���͂����炭�K�i�ƈقȂ�܂��B
�@�@�@�@�i�ꉞJIS X 0510�ɂ���}�P�ƕt�����W�̗�̌��ʂƂ͍����悤�ɂ�
�@�@�@�@�@�Ă��܂��B)
�@�@�@�@�i�}�X�N�̑I��������Ă����g�p��͖��Ȃ��Ǝv���܂����B�j
�@�@�i�Q�j�A�����[�h�͎����I�����ł��B
�@�@�i�R�j���̑����ۂ̋K�i�ƈقȂ铮������鋰�ꂪ�����ɂ���܂��B
�@�@�@�@�@�g�p�̍ۂ͏o�͂��ꂽ�V���{�����m���ɓǂ߂邩�̃e�X�g���s�����Ƃ�
�@�@�@�@�@�����߂��܂��B���Ƀo�[�W�����Q�X�ȏ�̃V���{���͍�҂̎莝�����[
�@�@�@�@�@�_�̐��\�̓s���㌟�؂��ł��Ă��܂���̂Ŏg�p�̍ۂ͓��ɂ����ӊ肢
�@�@�@�@�@�܂��B
�@�@�i�S�j�{�v���O�����́u�̂�܁v�ł��B�傫���o�[�W�������G���R�[�h����
�@�@�@�@�@�ꍇ�͂����ӂ��������B�i�^�C���A�E�g���邩������܂���B�j

�U�A���쌠�E�z�z�Ȃ�
�@�@�����̃v���O�����̒��쌠�͍�҂ł���Y.Swetake�ɂ���܂��B
�@�@�����̃v���O�����̓t���[�E�G�A�ł��B���Ƃ̒��쌠�\����ύX���Ȃ����
�@���R�ɍĔz�z�E�������Ă����܂��܂���B

�V�A�Ɛӎ���
�@�@�����̃v���O�����ɂ���Đ����邠���鑹�Q�E�s���v�ɂ��āA��҂�
�@��ؐӔC�𕉂��܂���B
�@�@��҂͂����̃v���O�����ɕs���������Ă��A������������`���𕉂���
�@����B

�W�A���̑�
�@�ŐV�ł͉��L�̃y�[�W���炽�ǂ�܂��B
�@�@http://www.swetake.com/

�@���ӌ��E�s��Ȃǂ���Ή��L�܂�
�@�@e-mail: swe[������]venus.dti.ne.jp
�@�@[������]��K���ȋL���ɏ��������Ă��������B

�X�A�X�V����
    2013/5/18 ver.0.50j
              �E�c�]�r�b�g���������]���Ă����s����C���B
�@�@�@�@�@�@�@�@�{�s��ɂ��ǂݎ�萸�x�ւ̉e���͊F���Ɛ�������܂����A���d�l�ɍ��v���邽�߂�
�@�@�@�@�@�@�@�@�C���ƂȂ��Ă��܂��B
		(���w�E���������܂����r�c�l�A���肪�Ƃ��������܂����B)

    2009/11/10 ver.0.50i
              �EPHP�łɂ�����preg_match�֐����̐��K�\���L�ڃ~�X���C���B

    2009/11/8 ver.0.50h
              �EPHP�łɂ����āAPHP5.3.0����񐄏��ƂȂ���ereg�֐���preg_match�֐���
�@�@�@�@�@�@�@�@�����������B�i�Ȃ��A�ȑO��ereg�֐���"-"�����܂��}�b�`�����A�G���R�[�h
�@�@�@�@�@�@�@�@���[�h�̎������ʂ�����Ă����s���preg_match�ɕύX���邱�Ƃɂ����������B
�@�@�@�@�@�@�@�EPerl�łɂ����ĔO�̂��ߐ��K�\���̋L�q��ύX�����B[]����\-����ԍŌ�ɏ����悤�ɂ����B
�@�@�@�@�@�@�@�@�Ȃ�����0.50g�Ŗ�肪�N���Ă��Ȃ���΃o�[�W�����A�b�v������K�v�͂Ȃ��Ǝv���܂��B

    2005/7/23 ver.0.50g
              �E����̃p�����[�^�̑g�ݍ��킹�ŃT�[�o�[��̃��\�[�X���ߏ��
�@�@�@�@�@�@�@�@�����s����C���B
              �E�o�[�W�����̏�����w��ł���ϐ���ǉ��B

    2005/7/21 ver.0.50f
              �Eperl�łɂ��������v�̃`�F�b�N���C��
              �Ephp�ł̃}�X�N�I���������ꕔ�ύX(thanks for Mr.Bru, Franky)

    2004/7/19 ver.0.50e
              �Ephp�ł�alphanumeric���[�h�ŋL�����������G���R�[�h�ł��Ȃ�
                �s����C��

              �Ersc36.dat rsc52.dat�̌v�Z�ԈႢ���C���B
               (�Ȃ������̃t�@�C����model2�ł͎g�p���܂���)

    2003/10/5 ver.0.50d
              �Eperl/cgi��html���[�h�ɂ� $img_path4html �̐ݒ肪
              �@���f����Ă��Ȃ��s��C��

    2003/6/19 ver.0.50c
              �E�}�X�N�I�������ꕔ�ύX
              �E�h�L�������g����

    2003/5/24 ver.0.50b 
              �E�h�L�������g�̉���

    2003/4/13 ver.0.50a
              �E�t�@�C���I�[�v�������̏C��(�o�C�i�����[�h���L)
              �E�G���[�������C��
              �E�h�L�������g�̉���(GD2.0�Ɋւ��钍�L�ǋL)

    2002/9/21 ver.0.50
              �E�o�[�W����1-40�Ή�
              �E�������x����̂��߈ȉ��̃��[�`����啝������
�@�@�@�@�@�@�@�@�@�G���[�����ꐶ������
�@�@�@�@�@�@�@�@�@�}�X�N�I�������@�@�@�@��

    2002/5/26  ver.0.40
              �E�A���Ɏ����I�ɑΉ��i����E�s��񍐊��}�v���܂��B�j
�@�@�@�@�@�@�@�Eqr_html.cgi ��qr_img.cgi�𓝍�
�@�@�@�@�@�@�@�@qr_img.cgi �̈���t=H���w�肷�邱�Ƃɂ��html�o�͂Ƃ����B
�@�@�@�@�@�@�@�EPHP�łɂ����ĊO���ϐ��̎�荞�݂�super�O���[�o���֐��ɂ��
�@�@�@�@�@�@�@�@���̂ɕύX�����B(�f�t�H���g��GET)
�@�@�@�@�@�@�@�E�}�X�N�̑I���@�\�p�~
�@�@�@�@�@�@�@�E���̑��A�R�[�h�̃����e�i���X�B

    2002/2/10 ver.0.31
�@�@�@�@�@�@�@�Ejpeg�o�͂ɑΉ�

�@�@2001/4/30 ver.0.30
�@�@�@�@�@�@�@�E�}�X�N�I�����[�`���X�V�BJIS X 0510�̐}�P�����
�@�@�@�@�@�@�@�@�t�����W�}�Q�̌��ʂƍ����悤�ɕύX�B
�@�@�@�@�@�@�@�@�i����ɂƂ��Ȃ��f�[�^�t�@�C���̍\���ύX�B�j
�@�@�@�@�@�@�@�Eversion 1-9 �Ή��B
�@�@�@�@�@�@�@�Eqr_img.cgi�̃R�}���h���C���Ή�

�@�@2001/3/30 ver.0.20a
�@�@�@�@�@�@�@�ECGI�łɂă}�X�N�I���p�����[�^�������s���Ȃ���
�@�@�@�@�@�@�@�E�}�X�N�����0�ƂȂ��Ă����s����C���B
�@�@�@�@�@�@�@�ECGI�ł͔C�ӂ̃}�X�N�p�^�[���I���@�\�p�~�B

    2001/3/9  ver. 0.20
�@�@�@�@�@�@�@�Eversion 1-6 �Ή�
�@�@�@�@�@�@�@�@����ɔ����f�[�^�����EECC���[�`�����啝�ύX�B

    2001/2/11 ver. 0.10B
�@�@�@�@�@�@�@�E�������[�`���X�V�B�������x20�`30%up�B
�@�@�@�@�@�@�@�EPHP�Œǉ��B

�@�@2000/9/11 ver. 0.10 ���J
�@�@�@�@�@�@�@(version1�̐����E�p�����E8bit���[�h�̂݃T�|�[�g)

[eof]
